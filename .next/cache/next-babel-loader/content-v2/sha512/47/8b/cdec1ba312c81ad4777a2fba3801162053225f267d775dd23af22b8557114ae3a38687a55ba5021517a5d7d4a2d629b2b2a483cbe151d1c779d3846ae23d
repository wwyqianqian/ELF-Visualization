{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/qianqian/work/ELF-Visualization/pages/index.jsx\";\nimport { AppBar, Container, Grid, List, ListItem, ListItemText, ListSubheader, ListItemIcon, Toolbar, Typography } from \"@material-ui/core\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { useEffect, useState } from \"react\";\nconst operations = [{\n  label: \"ELF header\",\n  op: \"-h\"\n}, {\n  label: \"Section headers\",\n  op: \"-S\"\n}, {\n  label: \"Program headers\",\n  op: \"-l\"\n}, {\n  label: \"Symbol table\",\n  op: \"-s\"\n}, {\n  label: \"Relocations\",\n  op: \"-r\"\n}];\n\nfunction HomePage() {\n  const {\n    0: files,\n    1: setFiles\n  } = useState([]);\n  const {\n    0: usingOperation,\n    1: setUsingOperation\n  } = useState();\n  const {\n    0: usingFile,\n    1: setUsingFile\n  } = useState();\n  const {\n    0: waiting,\n    1: setWaiting\n  } = useState(false);\n  const {\n    0: stdout,\n    1: setStdout\n  } = useState(\"\");\n\n  const exec = async () => {\n    if (waiting || !usingOperation || !usingFile) {\n      return;\n    }\n\n    setWaiting(true);\n    setStdout(\"Waiting…\");\n    const args = JSON.stringify([usingOperation, `binaries/${usingFile}`]);\n    const response = await (await fetch(`/api/call?args=${escape(args)}`)).text();\n    setStdout(response);\n    setWaiting(false);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const files = JSON.parse(await (await fetch(\"/api/list\")).text());\n      console.log(files);\n      setFiles(files);\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignContent: \"space-between\",\n      height: \"100vh\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"relative\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"ELF Parser\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      style: {\n        padding: 0,\n        flexGrow: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingTop: 20,\n          height: \"100%\",\n          maxHeight: \"100%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          style: {\n            height: \"100%\",\n            maxHeight: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: [/*#__PURE__*/_jsxDEV(List, {\n              component: \"nav\",\n              children: /*#__PURE__*/_jsxDEV(ListItem, {\n                button: true,\n                onClick: () => exec(),\n                children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                  children: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: \"Execute\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(List, {\n              subheader: /*#__PURE__*/_jsxDEV(ListSubheader, {\n                component: \"div\",\n                id: \"nested-list-subheader\",\n                children: \"Operations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this),\n              component: \"nav\",\n              children: operations.map(operation => /*#__PURE__*/_jsxDEV(ListItem, {\n                button: true,\n                selected: usingOperation === operation.op,\n                onClick: () => setUsingOperation(operation.op),\n                children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: operation.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(List, {\n              subheader: /*#__PURE__*/_jsxDEV(ListSubheader, {\n                component: \"div\",\n                id: \"nested-list-subheader\",\n                children: \"Binaries\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 19\n              }, this),\n              component: \"nav\",\n              children: files.map(file => /*#__PURE__*/_jsxDEV(ListItem, {\n                button: true,\n                selected: usingFile === file,\n                onClick: () => setUsingFile(file),\n                children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: file\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 9,\n            style: {\n              background: \"#272C35\",\n              color: \"white\",\n              fontFamily: \"monospace\",\n              overflowY: \"scroll\",\n              height: \"100%\",\n              maxHeight: 800\n            },\n            children: /*#__PURE__*/_jsxDEV(\"pre\", {\n              children: stdout\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/qianqian/work/ELF-Visualization/pages/index.jsx"],"names":["AppBar","Container","Grid","List","ListItem","ListItemText","ListSubheader","ListItemIcon","Toolbar","Typography","PlayArrowIcon","useEffect","useState","operations","label","op","HomePage","files","setFiles","usingOperation","setUsingOperation","usingFile","setUsingFile","waiting","setWaiting","stdout","setStdout","exec","args","JSON","stringify","response","fetch","escape","text","parse","console","log","display","flexDirection","alignContent","height","padding","flexGrow","paddingTop","maxHeight","map","operation","file","background","color","fontFamily","overflowY"],"mappings":"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","sourcesContent":["import {\n  AppBar,\n  Container,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  ListSubheader,\n  ListItemIcon,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { useEffect, useState } from \"react\";\n\nconst operations = [\n  {\n    label: \"ELF header\",\n    op: \"-h\",\n  },\n  {\n    label: \"Section headers\",\n    op: \"-S\",\n  },\n  {\n    label: \"Program headers\",\n    op: \"-l\",\n  },\n  {\n    label: \"Symbol table\",\n    op: \"-s\",\n  },\n  {\n    label: \"Relocations\",\n    op: \"-r\",\n  },\n];\n\nfunction HomePage() {\n  const [files, setFiles] = useState([]);\n  const [usingOperation, setUsingOperation] = useState();\n  const [usingFile, setUsingFile] = useState();\n  const [waiting, setWaiting] = useState(false);\n  const [stdout, setStdout] = useState(\"\");\n\n  const exec = async () => {\n    if (waiting || !usingOperation || !usingFile) {\n      return;\n    }\n    setWaiting(true);\n    setStdout(\"Waiting…\");\n    const args = JSON.stringify([usingOperation, `binaries/${usingFile}`]);\n    const response = await (\n      await fetch(`/api/call?args=${escape(args)}`)\n    ).text();\n\n    setStdout(response);\n    setWaiting(false);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const files = JSON.parse(await (await fetch(\"/api/list\")).text());\n      console.log(files);\n      setFiles(files);\n    })();\n  }, []);\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignContent: \"space-between\",\n        height: \"100vh\",\n      }}\n    >\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\">ELF Parser</Typography>\n        </Toolbar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\" style={{ padding: 0, flexGrow: 1 }}>\n        <div style={{ paddingTop: 20, height: \"100%\", maxHeight: \"100%\" }}>\n          <Grid\n            container\n            spacing={3}\n            style={{ height: \"100%\", maxHeight: \"100%\" }}\n          >\n            <Grid item xs={3}>\n              <List component=\"nav\">\n                <ListItem button onClick={() => exec()}>\n                  <ListItemIcon>\n                    <PlayArrowIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Execute\" />\n                </ListItem>\n              </List>\n\n              <List\n                subheader={\n                  <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                    Operations\n                  </ListSubheader>\n                }\n                component=\"nav\"\n              >\n                {operations.map((operation) => (\n                  <ListItem\n                    button\n                    selected={usingOperation === operation.op}\n                    onClick={() => setUsingOperation(operation.op)}\n                  >\n                    <ListItemText primary={operation.label} />\n                  </ListItem>\n                ))}\n              </List>\n              <List\n                subheader={\n                  <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                    Binaries\n                  </ListSubheader>\n                }\n                component=\"nav\"\n              >\n                {files.map((file) => (\n                  <ListItem\n                    button\n                    selected={usingFile === file}\n                    onClick={() => setUsingFile(file)}\n                  >\n                    <ListItemText primary={file} />\n                  </ListItem>\n                ))}\n              </List>\n            </Grid>\n            <Grid\n              item\n              xs={9}\n              style={{\n                background: \"#272C35\",\n                color: \"white\",\n                fontFamily: \"monospace\",\n                overflowY: \"scroll\",\n                height: \"100%\",\n                maxHeight: 800,\n              }}\n            >\n              <pre>{stdout}</pre>\n            </Grid>\n          </Grid>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}